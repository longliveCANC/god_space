[
  {
    "version": "3.0.0",
    "date": "2025-10-14",
    "changes": [
      "修复末日的没法自定义开局",
      "下调了友方的防御概率，从0.3降到了0.1，敌方不变",
      "增加在线更新【统一】正则和世界书功能"
    ]
  },
  {
    "version": "3.0.3",
    "date": "2025-10-14 22:52",
    "changes": [
      "不再将世界书和最近一次聊天备份到localstorage中，以免空间不足",
      "简化了正则",
      "现在当属性不是一个数字时，后台不会认为是NAN而是取默认值0。",
      "修复了世界书中【💫手动可选:分阶段任务progress】词条会在末日情况下错误生效的bug"
    ]
  },
  {
    "version": "3.0.6",
    "date": "2025-10-15 23:44",
    "changes": [
      "稍微肘击了世界书中小怪的生成数量",
      "现在支持消息中断和继续了。"
    ]
  },
    {
    "version": "3.0.7",
    "date": "2025-10-16",
    "changes": [
      "更改了世界书：肘击了AI改变能量池格式和会给变量更新打草稿导致出现很多info:...的问题。",
       "更改了正则：在能量池数据格式错误时，不会再堵塞后续代码。"
    ]
  },
    {
    "version": "3.0.8",
    "date": "2025-10-17",
    "changes": [
      "更改了脚本：对于不规范的变量的json格式能更加智能的检测和修复，且使[好感度]词条无法再更改结构，以防AI抽风给出旧值改变好感度结构。",
      "脚本无法在线更新，**请前往discord**下载新版本卡面替换更新。",
      "更改了正则：识小球中增加了[让AI重构]菜单，可以在格式错误时快捷发送指令让AI重写该变量;修复了自动发送无法跳转到聊天界面的bug"
    ]
  },
    {
    "version": "3.0.9",
    "date": "2025-10-18",
    "changes": [
      "更改了脚本：修复了对于字符串变量会多出来单引号的bug。脚本无法在线更新，**请前往discord**下载新版本卡面替换更新。" 
    ]
  },
    {
    "version": "3.0.11",
    "date": "2025-10-18 15：43",
    "changes": [
      "此为功能体验优化更新，世界书和正则都有变化。",
      "修复了非流式情况下，无法保存最新AI消息的bug",
      "修改了远程拉取世界书逻辑，现在会自动备份所有自定义词条的内容，更新的时候不会被覆盖了。",
      "修改了导入存档逻辑，现在导入存档的时候，如果有对应内容,会同时复原世界书条目和存档名称",
      "增加了[强调时间]mod。开启后，会在发送给AI的提示词中强调时间。具体修改为：在小总结前面加上地点和时间；在每一个楼层的最后面用代码附加上当前时间。" 
    ]
  },
    {
    "version": "3.0.12",
    "date": "2025-10-18 20：33",
    "changes": [
      "此为战斗体验优化更新，只修改了正则。",
      "增加了强制退出按钮，且在数据异常时会自动退出。"
    ]
  },
    {
    "version": "3.0.14",
    "date": "2025-10-18 22：40",
    "changes": [
      "修复了AI无法正确设置资源条的每轮消耗的问题。",
      "前端修复了识小球的菜单超出body界面的问题。",
      "增加了世界书绑定检测，在更新后/打开游戏的时候会自动检测一次。",
      "修改了关键记忆的提示词，使其会记录原话和记忆发生时的时机"
    ]
  },
    {
    "version": "3.0.15",
    "date": "2025-10-19 22：40",
    "changes": [
      "修复了给AI看的备忘录mod路径错误的bug",
      "肘击了末日发散设定的问题",
      "修复了查看历史消息的时候没法右键召出菜单的bug"
    ]
  },
    {
    "version": "3.0.16",
    "date": "2025-10-20 20：12",
    "changes": [
      "修复了如果技能的effect不是string格式会无法打开rp界面的bug",
      "将在后台给AI看的变量的顶层key换行了，AI会更容易内化和理解信息，800楼实测效果好的一批",
      "【让AI重构】中增加了【浓缩内容】的选项，主要用于信息冗余（如关键记忆记录了太多流水账）的情况",
      "左下角增加了【记约定】的快速指令，如果开启了备忘录，会将其记录在备忘录中。没开备忘录的话可能会记录在随机位置"
    ]
  },
    {
    "version": "3.1.0",
    "date": "2025-10-20 22：58",
    "changes": [
      "【注意】世界书相比3.0.16没有变化，因此直接只强制更新正则也可以",
      "代码增加硬性限制，敌方小怪数量不得超过10个",
      "对于非常规变量的更新、移动、重命名、删除、人物数值变化，会有弹窗显示具体更新细节了。"
      
    ]
  },
    {
    "version": "3.1.1",
    "date": "2025-10-22 3：53",
    "changes": [
      "【注意】世界书相比3.0.16没有变化，因此直接只强制更新正则也可以",
      "现在，当酒馆有点卡，导致脚本没有正常初始化变量的时候，正则将自动初始化。可能解决了无法进入聊天界面的bug"
 
      
    ]
  },
    {
    "version": "3.1.3",
    "date": "2025-10-22 14：37",
    "changes": [
      "喜欢省token的有福了。现在，识小球中的 【所有变量】 都可以在【编辑界面】设置为绿灯，其触发文本是最近显示的完整n层楼层。",
      "你可以设置一个完整的条目（如全局人物炭治郎）为绿灯，这个就不用解释了。",
      "也可以设置其子键为绿灯。例如，如果你设置【全局人物炭治郎的关键记忆】为绿灯，那么代码会在聊天文本中搜索【炭治郎】。如果没有匹配到，就会隐藏炭治郎的【关键记忆】条目。"
    ]
  }
  ,
    {
    "version": "3.1.4",
    "date": "2025-10-22 20：59",
    "changes": [
  "相比3.1.3，只更新正则。",
  "现在可以自定义qr。",
  "修复了重roll的时候跑到上面去了的问题",
  "使大总结也分页"
    ]
  },
    {
    "version": "3.1.5",
    "date": "2025-10-23 15:00",
    "changes": [
  "优化了世界书的自定义词条（可以自定义选项区、npc档案等），他们被统一加上了🎨前缀，打开词条即是覆盖，不用单独关闭原本的词条。且，让物品格式单独提取出来并支持自定义",
  "修复了简单npc模式没有外貌和性格的bug"
    ]
  },
    {
    "version": "3.1.7",
    "date": "2025-10-23 19:30",
    "changes": [
  "修复了简单npc情况下，Npc更新路径不稳定的bug;稍微优化了npc词条",
  "修复了重roll；深化了npc性格"
    ]
  },
    {
    "version": "3.1.9",
    "date": "2025-10-23 19:30",
    "changes": [
  "修复了若干bug" 
    ]
  },
    {
    "version": "3.1.11",
    "date": "2025-10-25 1：07",
    "changes": [
  "现在可以编辑大小总结了",
  "现在如果变量没有正确更新的话会弹出警告",
  "修复了开局图片似乎因为猫箱挂了没法显示的bug"
    ]
  },
    {
    "version": "3.1.12",
    "date": "2025-10-25 23：07",
    "changes": [
  "【此次更新更改了脚本，最好前往discord导入卡面更新脚本】",
  "脚本：增加了旧值过滤和json对象保护，以及重命名npc会一同继承分阶段好感",
  "ui：调整了mod位置;现在可以自动记忆上一次选择的mod;可以自定义扫描绿灯的楼层;给设置界面分页了;可以编辑地图（简单的移动和缩放，只有复杂地图可以）了",
  "将备忘录常驻了;增加了【特殊时间】mod，在需要记忆特殊节日或者生日的时候有用"
    ]
  },
    {
    "version": "3.1.13",
    "date": "2025-10-26 ",
    "changes": [
 "此次更新世界书无变化",
  "地图编辑可以移动线条了;表情包可以在正文显示了",
  "增加了延迟，可能会解决世界书有概率无法在更新后正常绑定的bug"
    ]
  },
    {
    "version": "3.1.15",
    "date": "2025-10-26 ",
    "changes": [
 "此次更新世界书无变化",
  "修复了小剧场没法显示的bug；现在阅里面也能查看正文表情包了",
  "解决了世界书有概率无法在更新后正常绑定的bug"
    ]
  },
    {
    "version": "3.1.17",
    "date": "2025-10-26 20：20",
    "changes": [
  "【请前往discord导入卡面更新脚本。似乎不更新也行】",
    "脚本：修复了在更新了酒馆助手之后，无法打开调试器的bug",
  "ui：可以在局内查看并调整世界模式了；在没有世界书条目的时候会默认初始化了；更新变量的职责统一在了同层，脚本不再负责了",
  "世界书：尝试肘击了重复根据同一个事件进行变更数值",
  "bug：修复了无法应用自定义立绘的bug"
 
    ]
  },
    {
    "version": "3.1.18",
    "date": "2025-10-26 20：20",
    "changes": [
    "修复了重roll会乱跳的bug。大概，如果还有类似情况请说明"
    ]
  },
    {
    "version": "3.1.19",
    "date": "2025-10-27 22：20",
    "changes": [
      "此为一点正则的优化更新，只更新了正则",
    "现在默认了将npc全部设置为绿灯，可以在设置中自由开关",
    "修复了论坛等在cot有标签的情况下无法正常解析的bug",
    "增加了在发现世界书没绑定的时候，自动绑定世界书的功能",
    "技能和物品支持以|换行",
    "现在如果哈基米给出的指令中带-，会严肃过滤掉"
    ]
  },
    {
    "version": "3.2.1",
    "date": "2025-10-28",
    "changes": [
      "一点体验优化更新，只更新了正则",
      "优化了绿灯的分词",
      "修复了更新之后，词条会没法第一时间恢复原本的词条的bug"
   
    ]
  },
    {
    "version": "3.2.2",
    "date": "2025-10-28 11:42",
    "changes": [
      "修复了在绿灯情况下无法彻底删除某个条目的bug",
      "现在如果开启了防删除，AI会知道这个条目不能删",
      "识小球也可以用|展示换行",
      "肘击了资源条可能不初始化的问题"
    ]
  },
    {
    "version": "3.2.5",
    "date": "2025-10-28 18:16",
    "changes": [
      "加强了错误json格式的解析。",
      "修复了代码小心回退了，导致在绿灯情况下又无法彻底删除某个条目的bug",
      "现在正在被隐藏的条目无法被整体替换"
    ]
  },
    {
    "version": "3.2.6",
    "date": "2025-10-29",
    "changes": [
      "修复了无法穿脱装备的Bug",
      "修复了被隐藏的绿灯npc在关闭绿灯后无法被AI看见的bug",
      "修复了自定义绿灯扫描楼层没法一直开启的bug",
      "如果没法更新成功，就尝试用强制更新按钮吧"
    ]
  },
    {
    "version": "3.2.7",
    "date": "2025-11-1",
    "changes": [
       "更新采用了localstorage续传的保险，以防止酒馆自动刷新中断更新流程。【警告！！】如果你当前版本无法成功一键更新，请在设置那里分别点击强制更新！！",
      "给成就检查添加了try catch，以防止缺失字段的时候无法正常运行。",
      "增加了好感度变速。",
      "优化了继续功能"

    ]
  },
    {
    "version": "3.2.8",
    "date": "2025-11-1",
    "changes": [
       "【警告！！】如果你当前版本(如3.2.7之前的版本)无法成功一键更新，请在设置那里分别点击强制更新！！",
      "现在可以查看当前浏览器的快照存档id并修改。",
      "修复了非流式的时候变量无法更新的bug"
 
    ]
  },
    {
    "version": "3.2.9",
    "date": "2025-11-1",
    "changes": [
       "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
 "更新采用了localstorage续传的保险，以防止酒馆自动刷新中断更新流程导致无法一键更新。"
 
    ]
  },
    {
    "version": "3.2.10",
    "date": "2025-11-4",
    "changes": [
       "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
       "修复了困难骰必定不生效、炼狱骰有时候不生效的bug"
 
    ]
  },
    {
    "version": "3.2.11",
    "date": "2025-11-9",
    "changes": [
       "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
       "现在可以收藏或命名某个章节了",
       "变量绿灯可以由最近一条user消息触发了"
 
    ]
  },
    {
    "version": "3.2.12",
    "date": "2025-11-19",
    "changes": [
          "【警告！！】此次更新最好前往dc更新脚本！不然可能会出现未知问题。",
          "现在存档大小减半了。且减少了部分美化",
  "选项现在可以简单渲染html",
       "默认开启了b站弹幕，共270tk，在设置里关",
       "优化了一些小问题",
       "取消了脱离世界后自动大总结的设定"
 
    ]
  },
    {
    "version": "3.2.13",
    "date": "2025-11-19",
    "changes": [
         "【警告！！】此次更新请前往dc更新脚本！不然可能会出现未知问题。",
         "修复了ui对于最新的酒馆助手的适配问题",
         "修复了初次导入的时候，世界书明明存在但是还会报错的问题"
    ]
  },
    {
    "version": "3.2.15",
    "date": "2025-11-20",
    "changes": [
         "已在dc同步更新，若有需要可以手动更新",
         "修复了部分设备的浏览器会丢失mod选项导致无法进入的bug",
         "参照柏柏的小手机提示词，修改了私聊的提示词结构，应该更稳定。同时能在正文看私聊消息。群聊那边照旧"
         
    ]
  },
    {
    "version": "3.2.16",
    "date": "2025-11-20",
    "changes": [
   
         "参照柏柏的小手机提示词优化了群聊和私聊的格式，同时抄了柏柏的音乐播放器代码。伟大的柏柏！同时，正文可以查看私聊和群聊内容。"
 
         
    ]
  },
    {
    "version": "3.2.17",
    "date": "2025-11-20",
    "changes": [
   
"增加了自动播放bgm的mod，可以在哈基米生成消息之后，自动丝滑播放切歌。缺点是有时候一首歌放不完。"
,"因为用的是网易云和qq音乐的api，所以开着梯子玩的话可能音乐会播放的卡卡的。但是图片资源又是github的资源，这个暂时没办法，自行取舍吧"
         
    ]
  },
    {
    "version": "3.2.18",
    "date": "2025-11-22",
    "changes": [
   "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
   "适配了哈基米3.0，修复了3.0经常给变量换行的bug",
   "优化了bgm播放逻辑",
   "优化了小总结的提示词",
   "现在可以通过{{getvar::玩家输入}}来获取你的输入",
   "优化了npc档案的部分提示词，现在关键记忆重复写入的问题大大减少了"
 
         
    ]
  },
    {
    "version": "3.2.19",
    "date": "2025-11-22",
    "changes": [
   "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
   "已在dc发布",
 "脚本彻底没用了，可以删掉了，整合重构集成到了设置中，手动执行在令小盒里。并且重构和重新处理和手动执行后都会自动刷新一次数据。",
 "掉变量的时候可以在左下角单独更新上一条正文的变量了。",
 "bgm稍微优化了一点"
         
    ]
  },
    {
    "version": "3.2.20",
    "date": "2025-11-22",
    "changes": [
   "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
  "相比上个版本只更新了正则！你可以只在设置界面点击强制更新正则！",
  "修复了继续[变量]只有刷新后才能使用的bug"
    ]
  },
    {
    "version": "3.2.21",
    "date": "2025-11-23",
    "changes": [
   "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
 "修复了世界书的🔰数值约束中的笔误",
"修复了新玩家无法进入游戏的bug;经实践，优化了性能。若有bug，希望继续反馈！",
"哪怕哈基米给的数据换行了也可以正常解析"
    ]
  },
    {
    "version": "3.3.4",
    "date": "2025-11-23",
    "changes": [
 "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
 "【警告！！】你是否在自定义词条自定义了内容？若有，请立刻备份并转移，新的版本会将自定义词条删除，独立成一本世界书！！该世界书会在dc发布！",
 "我有点像傻逼...总之现在性能史诗级优化。再也不用每次都验证世界书、转化世界书了。",
 "现在会自动检测你的提示词安装没有，安装了没打开的话会给你自动打开。",
 "将群聊和私聊格式整合在了一起，现在可以无限开群聊。",
 "稍微优化了更新逻辑",
 "将getmessagevar全部弃用，换用getlocalvar"
    ]
  },
    {
    "version": "3.3.5",
    "date": "2025-11-23",
    "changes": [
 "【警告！！】如果你当前无法成功一键更新，请在设置那里分别点击强制更新！！",
 "【警告！！】你是否在自定义词条自定义了内容？若有，请立刻备份并转移，新的版本会将自定义词条删除，独立成一本世界书！！该世界书会在dc发布！",
 "修复了可能会贪婪匹配导致小总结异常的问题" 
    ]
  }
]